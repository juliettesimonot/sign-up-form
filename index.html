<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <title>Frontend Mentor | Intro component with sign up form</title>
  </head>
  <body>
    <article>
      <h1>Learn to code by watching others</h1>
      <p>
        See how experienced developers solve problems in real-time. Watching
        scripted tutorials is great, but understanding how developers think is
        invaluable.
      </p>
    </article>

    <section>
      <h2><span>Try it free 7 days</span> then $20/mo. thereafter</h2>
      <form id="accountForm" action="index.html" method="post">
        <div>
          <input
            type="text"
            name="firstName"
            id="firstName"
            placeholder="First Name"
          />
          <img src="./images/icon-error.svg" alt="icon-error" />
          <p class="errorText"></p>
        </div>
        <div>
          <input
            type="text"
            name="lastName"
            id="lastName"
            placeholder="Last Name"
          />
          <img src="./images/icon-error.svg" alt="icon-error" />
          <p></p>
        </div>
        <div>
          <input
            type="text"
            name="userEmail"
            id="userEmail"
            placeholder="Email Address"
          />
          <img src="./images/icon-error.svg" alt="icon-error" />
          <p></p>
        </div>
        <div>
          <input
            type="password"
            name="userPassword"
            id="userPassword"
            placeholder="Password"
          />
          <img src="./images/icon-error.svg" alt="icon-error" />
          <p></p>
        </div>
        <button type="submit">Claim your free trial</button>
        <p class="termsParagraph">
          By clicking the button, you are agreeing to our
          <a href="">Terms and Services</a>
        </p>
      </form>
    </section>

    <script type="text/javascript">
      const form = document.getElementById("accountForm");
      const firstname = document.getElementById("firstName");
      const lastname = document.getElementById("lastName");
      const usermail = document.getElementById("userEmail");
      const userpassword = document.getElementById("userPassword");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        validForm();
      });

      function validForm() {
        const firstnameValue = firstname.value.trim();
        const lastnameValue = lastname.value.trim();
        const usermailValue = usermail.value.trim();
        const userpasswordValue = userpassword.value.trim();

        if (firstnameValue === "") {
          setErrorFor(firstname, "First Name cannot be empty");
        } else {
          removeErrorFor(firstname);
        }

        if (lastnameValue === "") {
          setErrorFor(lastname, "Last Name cannot be empty");
        } else {
          removeErrorFor(lastname);
        }

        if (usermailValue === "") {
          setErrorFor(usermail, "Email Address cannot be empty");
        } else if (!isEmail(usermailValue)) {
          setErrorFor(usermail, "Looks like is not an email");
          usermail.classList.add("redColor");
        } else if (isEmail(usermailValue)) {
          removeErrorFor(usermail);
          usermail.classList.remove("redColor");
        }

        if (userpasswordValue === "") {
          setErrorFor(userpassword, "Password cannot be empty");
        } else {
          removeErrorFor(userpassword);
        }
      }

      function setErrorFor(input, message) {
        const inputParent = input.parentElement;
        const errorImg = inputParent.querySelector("img");
        const errorMessage = inputParent.querySelector("p");
        const inputBox = inputParent.querySelector("input");

        errorMessage.innerText = message;
        errorImg.classList.add("active");
        inputBox.classList.add("redBorder");
        inputParent.querySelector("input").placeholder = "";
      }

      function removeErrorFor(input) {
        const inputParent = input.parentElement;
        const errorImg = inputParent.querySelector("img");
        const errorMessage = inputParent.querySelector("p");
        const inputBox = inputParent.querySelector("input");

        errorMessage.innerText = "";
        errorImg.classList.remove("active");
        inputBox.classList.remove("redBorder");
      }

      function isEmail(email) {
        return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(
          email
        );
      }
    </script>
  </body>
</html>
